!function(){ABM.FirebaseUI=function(){function t(t,e,s){var i,o,l,n,r=this;this.fbname=t,this.model=e,this.ui=s,this.fb=new Firebase(t),this.refs={},l=this.ui;for(i in l)o=l[i],this.refs[i]=this.fb.child(i);this.vals={},n=this.ui;for(i in n)o=n[i],this.vals[i]=o.val;this.resetModel(),this.fb.set(s,function(t){return console.log(null!=t?"FB error: "+t:"FB ready")}),this.fb.on("child_changed",function(t){return console.log("childChange",t.name(),t.val().val),r.setModelValue(t.name(),t.val().val)}),console.log("--- Firebase setup")}return t.prototype.setModelValue=function(t,e){var s;if(console.log("setModelValue: "+t+", "+e),this.vals[t]=e,"button"===this.ui[t].type){if(!e)return;this.setUIValue(t,!1)}return null!=(s=this.ui[t].setter)?this.model[s](e):this.model[t]=e},t.prototype.setUIValue=function(t,e){return console.log("setUIValue: "+t+", "+e),this.refs[t].child("val").set(e)},t.prototype.getUIValue=function(t){return this.vals[t]},t.prototype.resetModel=function(){var t,e,s,i;s=this.ui,i=[];for(t in s)e=s[t],"button"!==e.type&&i.push(this.setModelValue(t,e.val));return i},t.prototype.resetUI=function(){var t,e,s,i;s=this.ui,i=[];for(t in s)e=s[t],"button"!==e.type&&i.push(this.setUIValue(t,e.val));return i},t}()}.call(this);